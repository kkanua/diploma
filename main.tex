%\documentclass[a4paper, 12pt]{article}
\documentclass[a4paper, 14pt]{extarticle}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{indentfirst}

\input{sections/preamble.tex}

\let\stdsection\section
\renewcommand\section{\newpage\stdsection}
\usepackage[center]{caption}
%\renewcommand{\figurename}{Рис.}
%\addto\captionsenglish{\renewcommand{\figurename}{Fig.}}
\captionsetup[figure]{name={Рис.},labelsep=period}

\begin{document}
%\maketitle
\input{sections/title.tex}
%\newpage


\tableofcontents
\thispagestyle{empty}
\newpage

\setcounter{page}{3}
\section*{Введение}
\addcontentsline{toc}{section}{Введение}
  В 2019 году на ускорительном комплексе SuperKEKB эксперимент Belle II перешел в стадию phase 3. В данной стадии все системы детектора запущены и начался набор физических данных. Эксперимент Belle II направлен на изучение CP-нарушения в распадах B и D мезонов, $\tau$-физики, а также на поиск Новой физики. Проектная светимость коллайдера составляет $8\cdot10^{35}$с$^{-1}$см$^{-2}$, что в 40 раз превышает светимость, достигнутую в предыдущем эксперименте Belle.\par
  SuperKEKB -- электрон-позитронный коллайдер с ассиметричной энергией пучков (7 и 4 ГэВ соответственно), который является улучшенной версией предыдущего коллайдера KEKB.\par
  Одной из основных систем детектора является электромагнитный калориметр (ECL). Он предназначен для регистрации фотонов и электронов в широком диапазоне энергий, измерения их энергии и координат. Также данные с электромагнитного калориметра используются для измерения онлайн и офлайн светимости.\par
  При изучении редких распадов необходимо серьезно контролировать процесс набора данных, а также контролировать корректность работы ускорителя и детектора. Одним из способов контроля набора данных и корректности работы ускорителя является измерение светимости. Светимость характеризует количество столкновений частиц в пучке за единицу времени, приходящихся на единицу площади. Для более детального контроля измерение светимости производится в режиме реального времени (онлайн). Для данной цели используется модуль онлайн монитор светимости, который был разработан в ИЯФ СО РАН. Онлайн монитор светимости измеряет скорость счета событий $e^-e^+$ рассеяния с торцевых частей электромагнитного калориметра. Данная работа направлена на разработку программного обеспечения для онлайн монитора светимости, которое будет обеспечивать первичную проверку качества, архивирование, отображение и передачу данных.\par
\section{Эксперимент Belle II}
    \subsection{SuperKEKB и детектор Belle2}
    \input{sections/KEKBandDetector.tex}
    \subsection{Электромагнитный калориметр}
    \input{sections/ecl.tex}
    \subsection{Онлайн монитор светимости}
    \input{sections/lom.tex}
    \subsection{Система сбора данных DAQ}
    \input{sections/daq.tex}
    \subsection{Система медленного контроля}
    \input{sections/slowControl.tex}

\section{Анализ требований к ПО}
    \subsection{Сценарии использования}
    \input{sections/aim.tex}
    %\subsection{Передаваемая информация}
    %\input{sections/data.tex}
    \subsection{Архитектура ПО}
    \input{sections/arch.tex}
    \subsection{Требования к ПО}
    \input{sections/requirements.tex}

\section{Реализация ПО для онлайн монитора светимости}
%    \subsection{Архитектура ПО}
%    \input{sections/arch.tex}
    \subsection{Интегральные и максимальные значения светимостей}
    \input{sections/luminosities.tex}
    \subsection{Расчет пьедесталов}
    \input{sections/pedestals.tex}
    \subsection{Графический интерфейс}
    \input{sections/gui.tex}
    \subsection{Автоматизация энергетической калибровки LOM}
    \input{sections/calibration.tex}
\section*{Заключение}
\addcontentsline{toc}{section}{Заключение}
    В рамках данной работы было улучшено ПО для онлайн монитора светимости:
    \begin{itemize}
        \item Изменена архитектура ПО, что позволило увеличить стабильность работы системы. При помощи библиотеки pythonIOC реализована параллельная передача данных в системы медленного контроля NSM2 и EPICS.
        \item Добавлен расчет интегральной и максимальной светимостей за характерные промежутки времени.
        \item Добавлен расчет значений пьедесталов для каждого сектора, значения высчитываются в режиме реального времени.
        \item Создана база данных на основе sqlite для сохранения текущих значений светимостей, также записываются значения светимостей за предыдущие заходы.
        \item Расширен протокол управления монитором светимости. Реализованы команды pause и continue.
        \item Добавлено считывание значений калибровочных коэффициентов из базы данных при запуске
        \item Добавлена автоподстройка калибровочных коэффициентов относительно изменения аттенюаторных
    \end{itemize}
    
    Также был улучшен графический интерфейс для монитора светимости, который позволяет проводить удаленную настройку параметров, а также визуализирует данные с монитора светимости
    \begin{itemize} 
        \item Добавлено отображение значений пьедесталов для каждого сектора.
        \item Добавлено считывание порогового значения амплитуд для каждого сектора.
        \item Также были исправлены незначительные ошибки и улучшен интерфейс.
    \end{itemize}
    
    Также была написана программа для отображения основных параметров с монитора светимости, которая посредством сервиса noVNC экспортируется как веб-сервис, использующийся ECL экспертами.\par
  Разработанное ПО активно используется в эксперименте Belle II всеми целевыми группами пользователей. Весь код документирован и доступен во внутреннем репозитории проекта Belle II.
%\section*{Список литературы}
%\bibliographystyle{plain}
%\printbibliography[heading=subbibnumbered]
\bibliography{bibliography} 
\addcontentsline{toc}{section}{Список литературы}

\end{document}
